{"version":3,"file":"js/197.027e92cb.js","mappings":"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","sources":["webpack://vue-tea/./src/views/SortView.vue","webpack://vue-tea/./src/common/api/SortAPI.js","webpack://vue-tea/src/views/SortView.vue","webpack://vue-tea/./src/views/SortView.vue?b979","webpack://vue-tea/./src/views/SortView.vue?1aad"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"list container\"},[_c('header',[_c('div',{staticClass:\"return\"},[_c('i',{staticClass:\"iconfont icon-31fanhui1 search-return\",on:{\"click\":_vm.goBack}})]),_vm._m(0),_c('div',{staticClass:\"home\"},[_c('i',{staticClass:\"iconfont icon-home\",on:{\"click\":_vm.goHome}})])]),_c('section',[_c('div',{ref:\"left\",staticClass:\"list-l\"},[_c('ul',_vm._l((_vm.leftList),function(item){return _c('li',{key:item.id,class:{ active: _vm.currentIndex == item.id },on:{\"click\":function($event){return _vm.scrollToRight(item.id)}}},[_vm._v(_vm._s(item.name))])}),0)]),_c('div',{ref:\"right\",staticClass:\"list-r\"},[_c('div',{staticClass:\"list-r-content\"},[_c('div',{staticClass:\"view-img\"},[_c('img',{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:(_vm.bigpic),expression:\"bigpic\"}],attrs:{\"alt\":\"\"}})]),_c('ul',_vm._l((_vm.rightList),function(item){return _c('li',{key:item.id,staticClass:\"shop-list\"},[_c('h2',[_c('div',[_vm._v(_vm._s(item.name))])]),_c('ul',{staticClass:\"list-content\"},_vm._l((item.list),function(i,index){return _c('li',{key:index},[_c('img',{attrs:{\"src\":i.imgURL,\"alt\":\"\"}}),_c('span',[_vm._v(_vm._s(i.name))])])}),0)])}),0)])])]),_c('TabBar')],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"search\"},[_c('i',{staticClass:\"iconfont icon-search\"}),_c('span',[_vm._v(\"搜你喜欢...\")])])\n}]\n\nexport { render, staticRenderFns }","import request from '../request'\nexport const getSortAPI = () => {\n  return request.get(`/sort_list/data`)\n}\n","<template>\n  <div class=\"list container\">\n    <header>\n      <div class=\"return\">\n        <i class=\"iconfont icon-31fanhui1 search-return\" @click=\"goBack\"></i>\n      </div>\n      <div class=\"search\">\n        <i class=\"iconfont icon-search\"></i>\n        <span>搜你喜欢...</span>\n      </div>\n      <div class=\"home\">\n        <i class=\"iconfont icon-home\" @click=\"goHome\"></i>\n      </div>\n    </header>\n    <section>\n      <div class=\"list-l\" ref=\"left\">\n        <ul>\n          <li v-for=\"item in leftList\" :key=\"item.id\" :class=\"{ active: currentIndex == item.id }\" @click=\"scrollToRight(item.id)\">{{ item.name }}</li>\n        </ul>\n      </div>\n      <div class=\"list-r\" ref=\"right\">\n        <div class=\"list-r-content\">\n          <div class=\"view-img\"><img v-lazy=\"bigpic\" alt=\"\" /></div>\n          <ul>\n            <li v-for=\"item in rightList\" :key=\"item.id\" class=\"shop-list\">\n              <h2>\n                <div>{{ item.name }}</div>\n              </h2>\n              <ul class=\"list-content\">\n                <li v-for=\"(i, index) in item.list\" :key=\"index\">\n                  <!-- 这里懒加载会导致scroll跳转而显示不出 -->\n                  <img :src=\"i.imgURL\" alt=\"\" />\n                  <span>{{ i.name }}</span>\n                </li>\n              </ul>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </section>\n    <TabBar></TabBar>\n  </div>\n</template>\n\n<script>\nimport TabBar from '@/components/common/TabBar.vue'\nimport { getSortAPI } from '@/common/api/SortAPI'\n//引入滚动插件better-scroll\nimport BetterScroll from 'better-scroll'\nexport default {\n  name: 'SortView',\n  components: { TabBar },\n  data() {\n    return {\n      bigpic: '/images/tgy.jpeg',\n      leftList: [],\n      rightList: [],\n      //右边滚动\n      rightScroll: '',\n      //右侧每一块的高度\n      rightHeightList: [],\n      rightY: 100\n    }\n  },\n  //计算属性，计算哪个active\n  computed: {\n    currentIndex() {\n      //利用findIndex找到滚动距离对应下标\n      return this.rightHeightList.findIndex((v, i) => {\n        return this.rightY >= v && this.rightY < this.rightHeightList[i + 1]\n      })\n    }\n  },\n  created() {\n    this.getData()\n  },\n  methods: {\n    async getData() {\n      let { data: res } = await getSortAPI()\n      res.sort.forEach((v) => {\n        this.leftList.push({\n          id: v.id,\n          name: v.name\n        })\n        this.rightList.push(v.data)\n      })\n      this.$nextTick(() => {\n        //左侧滑动(betterscroll会自动屏蔽click事件，只有修改了probeType才会返回坐标)\n        this.scroll = new BetterScroll(this.$refs.left, { movable: false, click: true, probeType: 3, bounce: false })\n        //右侧滑动\n        this.rightScroll = new BetterScroll(this.$refs.right, { click: true, probeType: 3, bounce: false })\n        //最开始0rem，用数组rightHeight记录\n        this.rightHeightList.push(0)\n        //但其实是从2.6667rem开始加的\n        let height = 100\n        //获取右侧每一块\n        let lis = this.$refs.right.getElementsByClassName('shop-list')\n        Array.from(lis).forEach((v) => {\n          height += v.clientHeight\n          this.rightHeightList.push(height)\n        })\n        let flag = 1\n        //监听滚动\n        this.rightScroll.on('scroll', (pos) => {\n          //使用节流阀更改rightY属性\n          if (flag) {\n            flag = 0\n            let timer = setTimeout(() => {\n              this.rightY = Math.abs(pos.y)\n              flag = 1\n              clearTimeout(timer)\n            }, 15)\n          }\n        })\n      })\n    },\n    scrollToRight(item) {\n      //利用点击的id和betterscroll的scrollTo事件\n      this.rightScroll.scrollTo(0, -this.rightHeightList[item], 500)\n    },\n    goBack() {\n      this.$router.back()\n    },\n    goHome() {\n      this.$router.push('./')\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n.list {\n  header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    height: 1.6rem;\n    background-color: #b0352f;\n\n    .return {\n      padding: 0 0.4267rem;\n      i {\n        color: #fff;\n        font-size: 0.64rem;\n      }\n    }\n\n    .search {\n      flex: 1;\n      display: flex;\n      align-items: center;\n      height: 0.8rem;\n      background-color: #fff;\n      padding: 0 0.4267rem;\n      border-radius: 0.4267rem;\n      color: #999;\n      i {\n        font-size: 0.48rem;\n        padding-right: 0.16rem;\n      }\n      span {\n        font-size: 0.4267rem;\n      }\n    }\n\n    .home {\n      padding: 0 0.4267rem;\n\n      i {\n        font-size: 0.7467rem;\n        color: #fff;\n      }\n    }\n  }\n\n  section {\n    display: flex;\n    .list-l {\n      width: 2.48rem;\n      background-color: #fff;\n      overflow: hidden;\n      border-right: 0.0267rem solid #ccc;\n\n      ul {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        overflow: hidden;\n\n        li {\n          width: 100%;\n          padding: 0.1067rem 0;\n          margin: 0.32rem 0;\n          text-align: center;\n          font-size: 0.4267rem;\n        }\n        .active {\n          color: #b0352f;\n          border-left: 0.1333rem solid #b0352f;\n          box-sizing: border-box;\n          padding-right: 0.1333rem;\n        }\n      }\n    }\n    .list-r {\n      flex: 1;\n      overflow: hidden;\n      .list-r-content {\n        display: flex;\n        flex-direction: column;\n        .view-img {\n          height: 2.6667rem;\n          img {\n            display: block;\n            width: 90%;\n            height: 90%;\n            margin: 0 auto;\n            border-radius: 10px;\n          }\n        }\n        .shop-list:last-child {\n          padding-bottom: 6.9333rem;\n        }\n        .shop-list {\n          text-align: center;\n          h2 {\n            div {\n              position: relative;\n              display: inline-block;\n              font-size: 0.64rem;\n              font-weight: 400;\n              padding: 0.4267rem 0;\n            }\n            div::before {\n              position: absolute;\n              left: -0.8rem;\n              content: '—';\n              font-weight: 900;\n              color: #ddd;\n            }\n            div::after {\n              position: absolute;\n              right: -0.8rem;\n              content: '—';\n              font-weight: 900;\n              color: #ddd;\n            }\n          }\n\n          .list-content {\n            display: flex;\n            flex-wrap: wrap;\n\n            li {\n              display: flex;\n              flex-direction: column;\n              justify-content: center;\n              align-items: center;\n              width: 33.3%;\n              height: 33.3%;\n              padding: 0.2667rem 0;\n\n              img {\n                width: 1.4133rem;\n                height: 1.4133rem;\n                border-radius: 50%;\n              }\n              span {\n                font-size: 0.4267rem;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n/deep/ .tabbar {\n  border-top: 0.0267rem solid #ccc;\n}\n</style>\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SortView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SortView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SortView.vue?vue&type=template&id=1ba241b2&scoped=true&\"\nimport script from \"./SortView.vue?vue&type=script&lang=js&\"\nexport * from \"./SortView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SortView.vue?vue&type=style&index=0&id=1ba241b2&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ba241b2\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","on","goBack","_m","goHome","ref","_l","leftList","item","key","id","class","active","currentIndex","$event","scrollToRight","_v","_s","name","directives","rawName","value","bigpic","expression","attrs","rightList","list","i","index","imgURL","staticRenderFns","getSortAPI","request","components","TabBar","data","rightScroll","rightHeightList","rightY","computed","findIndex","v","created","getData","methods","res","sort","forEach","push","$nextTick","scroll","BetterScroll","$refs","left","movable","click","probeType","bounce","right","height","lis","getElementsByClassName","Array","from","clientHeight","flag","pos","timer","setTimeout","Math","abs","y","clearTimeout","scrollTo","$router","back","component"],"sourceRoot":""}