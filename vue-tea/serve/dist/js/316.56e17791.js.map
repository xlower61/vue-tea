{"version":3,"file":"js/316.56e17791.js","mappings":"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","sources":["webpack://vue-tea/./src/components/common/CommonHeader.vue","webpack://vue-tea/src/components/common/CommonHeader.vue","webpack://vue-tea/./src/components/common/CommonHeader.vue?3404","webpack://vue-tea/./src/components/common/CommonHeader.vue?921a","webpack://vue-tea/./src/views/login/PwdLoginView.vue","webpack://vue-tea/src/views/login/PwdLoginView.vue","webpack://vue-tea/./src/views/login/PwdLoginView.vue?5b56","webpack://vue-tea/./src/views/login/PwdLoginView.vue?9e68","webpack://vue-tea/./src/common/api/loginAPI.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('header',[_c('div',[_c('i',{staticClass:\"iconfont icon-31fanhui1\",on:{\"click\":_vm.goBack}})]),_c('div',[_c('span',[_vm._t(\"title\",function(){return [_vm._v(\"登录\")]})],2)]),_c('div',[_c('i',{staticClass:\"iconfont icon-home\",on:{\"click\":_vm.goHome}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <header>\n    <div>\n      <i class=\"iconfont icon-31fanhui1\" @click=\"goBack\"></i>\n    </div>\n    <div>\n      <!-- 添加插槽默认使登录 -->\n      <span>\n        <slot name=\"title\">登录</slot>\n      </span>\n    </div>\n    <div>\n      <i class=\"iconfont icon-home\" @click=\"goHome\"></i>\n    </div>\n  </header>\n</template>\n\n<script>\nexport default {\n  name: 'CommonHeader',\n  methods: {\n    goBack() {\n      if (this.$route.path === '/address' && this.$route.query.type !== 'select') {\n        this.$router.push('/mine').catch(() => {})\n      } else {\n        this.$router.back()\n      }\n    },\n    goHome() {\n      this.$router.push('/')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\nheader {\n  width: 100%;\n  height: 1.1733rem;\n  background-color: #b0352f;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #fff;\n  font-weight: 400;\n  span {\n    font-size: 0.4267rem;\n  }\n  i {\n    font-size: 0.5867rem;\n    padding: 0 0.4rem;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommonHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommonHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CommonHeader.vue?vue&type=template&id=4dbb2d1a&scoped=true&\"\nimport script from \"./CommonHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./CommonHeader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CommonHeader.vue?vue&type=style&index=0&id=4dbb2d1a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4dbb2d1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login container\"},[_c('CommonHeader'),_c('section',[_c('div',{staticClass:\"login-tel\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userTel),expression:\"userTel\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入手机号\",\"pattern\":\"[0-9]{11}\"},domProps:{\"value\":(_vm.userTel)},on:{\"input\":function($event){if($event.target.composing)return;_vm.userTel=$event.target.value}}})]),_c('div',{staticClass:\"login-password\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userPassword),expression:\"userPassword\"}],attrs:{\"type\":\"password\",\"placeholder\":\"请输入密码\",\"pattern\":\"[0-9]*\"},domProps:{\"value\":(_vm.userPassword)},on:{\"input\":function($event){if($event.target.composing)return;_vm.userPassword=$event.target.value}}})]),_c('div',{staticClass:\"login-in\",on:{\"click\":_vm.login}},[_vm._v(\"登录\")]),_c('div',{staticClass:\"login-tab\"},[_c('span',{on:{\"click\":_vm.toCodeLogin}},[_vm._v(\"短信登录\")]),_c('span',{on:{\"click\":_vm.toFindIndex}},[_vm._v(\"找回密码\")]),_c('span',{on:{\"click\":_vm.toRegister}},[_vm._v(\"快速注册\")])])]),_c('TabBar')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login container\">\n    <!-- 使用插槽 -->\n    <CommonHeader></CommonHeader>\n    <section>\n      <div class=\"login-tel\">\n        <input type=\"text\" placeholder=\"请输入手机号\" pattern=\"[0-9]{11}\" v-model=\"userTel\" />\n      </div>\n      <div class=\"login-password\">\n        <input type=\"password\" placeholder=\"请输入密码\" pattern=\"[0-9]*\" v-model=\"userPassword\" />\n      </div>\n      <div class=\"login-in\" @click=\"login\">登录</div>\n      <div class=\"login-tab\">\n        <span @click=\"toCodeLogin\">短信登录</span>\n        <span @click=\"toFindIndex\">找回密码</span>\n        <span @click=\"toRegister\">快速注册</span>\n      </div>\n    </section>\n    <TabBar></TabBar>\n  </div>\n</template>\n\n<script>\nimport TabBar from '@/components/common/TabBar.vue'\nimport CommonHeader from '@/components/common/CommonHeader.vue'\nimport { Toast } from 'vant'\nimport { userLoginAPI } from '@/common/api/loginAPI'\nimport { mapState, mapMutations } from 'vuex'\n\nexport default {\n  name: 'PwdLoginView',\n  components: { CommonHeader, TabBar },\n  data() {\n    return {\n      //用户输入的手机号和密码\n      userTel: '',\n      userPassword: ''\n    }\n  },\n  computed: {\n    ...mapState({\n      loginRules: (state) => state.user.loginRules\n    })\n  },\n  methods: {\n    ...mapMutations(['LOGIN']),\n    toCodeLogin() {\n      this.$router.push('/login')\n    },\n    toRegister() {\n      this.$router.push('/login/register')\n    },\n    toFindIndex() {\n      this.$router.push('/login/findIndex')\n    },\n    async login() {\n      //手机号验证\n      if (!this.loginRules.userTel.rule.test(this.userTel)) {\n        Toast(this.loginRules.userTel.msg)\n        return\n      }\n      //密码验证\n      if (!this.loginRules.userPassword.rule.test(this.userPassword)) {\n        Toast(this.loginRules.userPassword.msg)\n        return\n      }\n      let { data: res } = await userLoginAPI(this.userTel, this.userPassword)\n      Toast(res.data.msg)\n      if (res.data.success) {\n        //将用户信息提交给vuex\n        this.LOGIN(res.data.userinfo)\n        this.$router.push('/mine')\n      }\n    },\n    //回车登录，方便测试\n    enterLogin(e) {\n      // 回车则执行登录方法 enter键的ASCII是13\n      if (e.keyCode === 13) {\n        this.login() // 定义的登录方法\n      }\n    }\n  },\n\n  activated() {\n    window.addEventListener('keyup', this.enterLogin)\n  },\n  deactivated() {\n    //因为是window监听，所以要在失活时解绑，不然在别的页面也会生效\n    window.removeEventListener('keyup', this.enterLogin, false)\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\nsection {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: #f5f5f5;\n  font-size: 0.3733rem;\n  div {\n    width: 8.9333rem;\n    height: 1.1733rem;\n    margin: 0.2667rem 0;\n  }\n  input {\n    padding: 0 0.2667rem;\n    line-height: 1.1733rem;\n    background-color: #fff;\n    border: 0.0267rem solid #ccc;\n    box-sizing: border-box;\n    border-radius: 0.16rem;\n  }\n  .login-tel {\n    margin-top: 0.8rem;\n    input {\n      width: 100%;\n    }\n  }\n  .login-password {\n    display: flex;\n    align-items: center;\n    input {\n      flex: 1;\n      margin-right: 1px;\n    }\n  }\n  .login-in {\n    background-color: #b0352f;\n    line-height: 1.1733rem;\n    text-align: center;\n    color: #fff;\n    border-radius: 0.16rem;\n  }\n  .login-tab {\n    display: flex;\n    justify-content: space-between;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PwdLoginView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PwdLoginView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PwdLoginView.vue?vue&type=template&id=2db00132&scoped=true&\"\nimport script from \"./PwdLoginView.vue?vue&type=script&lang=js&\"\nexport * from \"./PwdLoginView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PwdLoginView.vue?vue&type=style&index=0&id=2db00132&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2db00132\",\n  null\n  \n)\n\nexport default component.exports","import request from '../request'\nexport const userLoginAPI = (tel, pwd) => {\n  return request.post(`/userLogin`, {\n    userTel: tel,\n    userPwd: pwd\n  })\n}\n\nexport const getCodeAPI = (tel) => {\n  return request.post(`/getcode`, {\n    userTel: tel\n  })\n}\n\nexport const codeLoginAPI = (tel, code) => {\n  return request.post(`/codeLogin`, {\n    userTel: tel,\n    msgCode: code\n  })\n}\n\nexport const RegisterAPI = (tel, code, pwd) => {\n  return request.post(`/Register`, {\n    userTel: tel,\n    msgCode: code,\n    userPwd: pwd\n  })\n}\n\nexport const findTelAPI = (tel, code) => {\n  return request.post(`/findTel`, {\n    userTel: tel,\n    msgCode: code\n  })\n}\n\nexport const resetPasswordAPI = (tel, pwd) => {\n  return request.post(`/resetPassword`, {\n    userTel: tel,\n    userPwd: pwd\n  })\n}\n"],"names":["render","_vm","this","_c","_self","staticClass","on","goBack","_t","_v","goHome","staticRenderFns","name","methods","$route","path","query","type","$router","push","catch","back","component","directives","rawName","value","userTel","expression","attrs","domProps","$event","target","composing","userPassword","login","toCodeLogin","toFindIndex","toRegister","components","CommonHeader","TabBar","data","computed","mapState","loginRules","state","user","mapMutations","rule","test","_Toast","msg","res","userLoginAPI","success","LOGIN","userinfo","enterLogin","e","keyCode","activated","window","addEventListener","deactivated","removeEventListener","tel","pwd","request","userPwd","getCodeAPI","codeLoginAPI","code","msgCode","RegisterAPI","findTelAPI","resetPasswordAPI"],"sourceRoot":""}