{"version":3,"file":"js/398.26371231.js","mappings":"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","sources":["webpack://vue-tea/./src/components/common/CommonHeader.vue","webpack://vue-tea/src/components/common/CommonHeader.vue","webpack://vue-tea/./src/components/common/CommonHeader.vue?3404","webpack://vue-tea/./src/components/common/CommonHeader.vue?921a","webpack://vue-tea/./src/views/login/MsgLoginView.vue","webpack://vue-tea/src/views/login/MsgLoginView.vue","webpack://vue-tea/./src/views/login/MsgLoginView.vue?f89f","webpack://vue-tea/./src/views/login/MsgLoginView.vue?f7ed","webpack://vue-tea/./src/common/api/loginAPI.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('header',[_c('div',[_c('i',{staticClass:\"iconfont icon-31fanhui1\",on:{\"click\":_vm.goBack}})]),_c('div',[_c('span',[_vm._t(\"title\",function(){return [_vm._v(\"登录\")]})],2)]),_c('div',[_c('i',{staticClass:\"iconfont icon-home\",on:{\"click\":_vm.goHome}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <header>\n    <div>\n      <i class=\"iconfont icon-31fanhui1\" @click=\"goBack\"></i>\n    </div>\n    <div>\n      <!-- 添加插槽默认使登录 -->\n      <span>\n        <slot name=\"title\">登录</slot>\n      </span>\n    </div>\n    <div>\n      <i class=\"iconfont icon-home\" @click=\"goHome\"></i>\n    </div>\n  </header>\n</template>\n\n<script>\nexport default {\n  name: 'CommonHeader',\n  methods: {\n    goBack() {\n      if (this.$route.path === '/address' && this.$route.query.type !== 'select') {\n        this.$router.push('/mine').catch(() => {})\n      } else {\n        this.$router.back()\n      }\n    },\n    goHome() {\n      this.$router.push('/')\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\nheader {\n  width: 100%;\n  height: 1.1733rem;\n  background-color: #b0352f;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  color: #fff;\n  font-weight: 400;\n  span {\n    font-size: 0.4267rem;\n  }\n  i {\n    font-size: 0.5867rem;\n    padding: 0 0.4rem;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommonHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./CommonHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CommonHeader.vue?vue&type=template&id=4dbb2d1a&scoped=true&\"\nimport script from \"./CommonHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./CommonHeader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CommonHeader.vue?vue&type=style&index=0&id=4dbb2d1a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4dbb2d1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"login container\"},[_c('CommonHeader'),_c('section',[_c('div',{staticClass:\"login-tel\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.userTel),expression:\"userTel\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入手机号\",\"pattern\":\"[0-9]{11}\"},domProps:{\"value\":(_vm.userTel)},on:{\"input\":function($event){if($event.target.composing)return;_vm.userTel=$event.target.value}}})]),_c('div',{staticClass:\"login-code\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msgCode),expression:\"msgCode\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入短信验证码\",\"pattern\":\"[0-9]*\"},domProps:{\"value\":(_vm.msgCode)},on:{\"input\":function($event){if($event.target.composing)return;_vm.msgCode=$event.target.value}}}),_c('button',{class:_vm.isDisable === false ? 'active' : 'noactive',attrs:{\"disabled\":_vm.isDisable},on:{\"click\":_vm.getShortCode}},[_vm._v(_vm._s(_vm.btn))])]),_c('div',{staticClass:\"login-in\",on:{\"click\":_vm.login}},[_vm._v(\"登录\")]),_c('div',{staticClass:\"login-tab\"},[_c('span',{on:{\"click\":_vm.toUserLogin}},[_vm._v(\"密码登录\")]),_c('span',{on:{\"click\":_vm.toRegister}},[_vm._v(\"快速注册\")])])]),_c('TabBar')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"login container\">\n    <!-- 使用插槽 -->\n    <CommonHeader></CommonHeader>\n    <section>\n      <div class=\"login-tel\">\n        <input type=\"text\" placeholder=\"请输入手机号\" pattern=\"[0-9]{11}\" v-model=\"userTel\" />\n      </div>\n      <div class=\"login-code\">\n        <input type=\"text\" placeholder=\"请输入短信验证码\" pattern=\"[0-9]*\" v-model=\"msgCode\" />\n        <button :class=\"isDisable === false ? 'active' : 'noactive'\" :disabled=\"isDisable\" @click=\"getShortCode\">{{ btn }}</button>\n      </div>\n      <div class=\"login-in\" @click=\"login\">登录</div>\n      <div class=\"login-tab\">\n        <span @click=\"toUserLogin\">密码登录</span>\n        <span @click=\"toRegister\">快速注册</span>\n      </div>\n    </section>\n    <TabBar></TabBar>\n  </div>\n</template>\n\n<script>\nimport TabBar from '@/components/common/TabBar.vue'\nimport CommonHeader from '@/components/common/CommonHeader.vue'\nimport { Toast } from 'vant'\nimport { getCodeAPI, codeLoginAPI } from '@/common/api/loginAPI'\nimport { mapState } from 'vuex'\nexport default {\n  name: 'MsgLoginView',\n  components: { CommonHeader, TabBar },\n  data() {\n    return {\n      //用户输入的手机号\n      userTel: '',\n      isDisable: false,\n      btn: '获取短信验证码',\n      waitTime: 6,\n      msgCode: ''\n    }\n  },\n  computed: {\n    ...mapState({\n      loginRules: (state) => state.user.loginRules\n    })\n  },\n  methods: {\n    toUserLogin() {\n      this.$router.push('/login/password')\n    },\n    toRegister() {\n      this.$router.push('/login/register')\n    },\n    async getShortCode() {\n      //手机号验证\n      if (!this.loginRules.userTel.rule.test(this.userTel)) {\n        Toast(this.loginRules.userTel.msg)\n        return\n      }\n      let { data: res } = await getCodeAPI(this.userTel)\n      if (res.data.success) {\n        console.log(res.data.data)\n        Toast('验证码发送成功！')\n      }\n      //禁用按钮\n      this.isDisable = true\n      //倒计时\n      let timer = setInterval(() => {\n        --this.waitTime\n        this.btn = `重新发送${this.waitTime}`\n      }, 1000)\n      setTimeout(() => {\n        clearInterval(timer)\n        this.waitTime = 6\n        this.btn = '重新获取验证码'\n        this.isDisable = false\n      }, 6000)\n    },\n    async login() {\n      //手机号验证\n      if (!this.loginRules.userTel.rule.test(this.userTel)) {\n        Toast(this.loginRules.userTel.msg)\n        return\n      }\n      //验证码验证\n      if (!this.loginRules.msgCode.rule.test(this.msgCode)) {\n        Toast(this.loginRules.msgCode.msg)\n        return\n      }\n      //发送登录请求\n      let { data: res } = await codeLoginAPI(this.userTel, this.msgCode)\n\n      if (res.data.success) {\n        Toast(res.data.msg)\n        this.$store.commit('LOGIN', res.data.userinfo)\n        this.$router.push('/mine')\n      } else {\n        Toast(res.data.msg)\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\nsection {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  background-color: #f5f5f5;\n  font-size: 0.3733rem;\n  div {\n    width: 8.9333rem;\n    height: 1.1733rem;\n    margin: 0.2667rem 0;\n  }\n  input {\n    padding: 0 0.2667rem;\n    line-height: 1.1733rem;\n    background-color: #fff;\n    border: 0.0267rem solid #ccc;\n    box-sizing: border-box;\n    border-radius: 0.16rem;\n  }\n  .login-tel {\n    margin-top: 0.8rem;\n    input {\n      width: 100%;\n    }\n  }\n  .login-code {\n    display: flex;\n    align-items: center;\n    input {\n      flex: 1;\n      margin-right: 0.0267rem;\n    }\n\n    button {\n      height: 1.1733rem;\n      border: 0;\n      color: #fff;\n      border-radius: 0.16rem;\n      box-sizing: border-box;\n      font-size: 0.3733rem;\n      padding: 0 0.2667rem;\n    }\n  }\n  .login-in {\n    background-color: #b0352f;\n    line-height: 1.1733rem;\n    text-align: center;\n    color: #fff;\n    border-radius: 0.16rem;\n  }\n  .login-tab {\n    display: flex;\n    justify-content: space-between;\n  }\n}\n.noactive {\n  background-color: #999;\n}\n.active {\n  background-color: #b0352f;\n}\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MsgLoginView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./MsgLoginView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./MsgLoginView.vue?vue&type=template&id=9907d1ac&scoped=true&\"\nimport script from \"./MsgLoginView.vue?vue&type=script&lang=js&\"\nexport * from \"./MsgLoginView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./MsgLoginView.vue?vue&type=style&index=0&id=9907d1ac&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9907d1ac\",\n  null\n  \n)\n\nexport default component.exports","import request from '../request'\nexport const userLoginAPI = (tel, pwd) => {\n  return request.post(`/userLogin`, {\n    userTel: tel,\n    userPwd: pwd\n  })\n}\n\nexport const getCodeAPI = (tel) => {\n  return request.post(`/getcode`, {\n    userTel: tel\n  })\n}\n\nexport const codeLoginAPI = (tel, code) => {\n  return request.post(`/codeLogin`, {\n    userTel: tel,\n    msgCode: code\n  })\n}\n\nexport const RegisterAPI = (tel, code, pwd) => {\n  return request.post(`/Register`, {\n    userTel: tel,\n    msgCode: code,\n    userPwd: pwd\n  })\n}\n\nexport const findTelAPI = (tel, code) => {\n  return request.post(`/findTel`, {\n    userTel: tel,\n    msgCode: code\n  })\n}\n\nexport const resetPasswordAPI = (tel, pwd) => {\n  return request.post(`/resetPassword`, {\n    userTel: tel,\n    userPwd: pwd\n  })\n}\n"],"names":["render","_vm","this","_c","_self","staticClass","on","goBack","_t","_v","goHome","staticRenderFns","name","methods","$route","path","query","type","$router","push","catch","back","component","directives","rawName","value","userTel","expression","attrs","domProps","$event","target","composing","msgCode","class","isDisable","getShortCode","_s","btn","login","toUserLogin","toRegister","components","CommonHeader","TabBar","data","waitTime","computed","mapState","loginRules","state","user","rule","test","_Toast","msg","res","getCodeAPI","success","console","log","timer","setInterval","setTimeout","clearInterval","codeLoginAPI","$store","commit","userinfo","userLoginAPI","tel","pwd","request","userPwd","code","RegisterAPI","findTelAPI","resetPasswordAPI"],"sourceRoot":""}