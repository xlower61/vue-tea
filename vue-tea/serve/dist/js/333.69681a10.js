"use strict";(self["webpackChunkvue_tea"]=self["webpackChunkvue_tea"]||[]).push([[333],{4162:function(e,t,r){r.d(t,{Z:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-header"},[t("i",{staticClass:"iconfont icon-31fanhui1 search-return",on:{click:e.goBack}}),t("div",{staticClass:"search-mid"},[t("i",{staticClass:"iconfont icon-search"}),t("form",{attrs:{action:"",onsubmit:"return false"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.goSearchList.apply(null,arguments)}}},[t("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.searchVal,expression:"searchVal",modifiers:{trim:!0}}],ref:"input",attrs:{type:"text",placeholder:"搜索您喜欢的商品"},domProps:{value:e.searchVal},on:{input:function(t){t.target.composing||(e.searchVal=t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})])]),t("div",{staticClass:"search-btn",on:{click:e.goSearchList}},[e._v("搜索")])])},a=[],i=(r(7658),r(541),{name:"searchHeader",data(){return{searchVal:this.$route.query.key||"",searchList:[]}},mounted(){window.addEventListener("touchend",this.myTouchMove,!0)},deactivated(){window.removeEventListener("touchend",this.myTouchMove,!1)},methods:{myTouchMove(){this.$refs.input.blur()},goBack(){"search-list"==this.$router.history.current.name?this.$router.push("/search"):this.$router.push("/")},goSearchList(){if(!this.searchVal)return;localStorage.getItem("searchList")?this.searchList=JSON.parse(localStorage.getItem("searchList")):localStorage.setItem("searchList","[]"),this.searchList.unshift(this.searchVal);let e=new Set(this.searchList);localStorage.setItem("searchList",JSON.stringify(Array.from(e))),this.searchVal!==this.$route.query.key&&this.$router.push({name:"search-list",query:{key:this.searchVal}})}}}),c=i,n=r(1001),o=(0,n.Z)(c,s,a,!1,null,"ab833fe6",null),h=o.exports},2333:function(e,t,r){r.r(t),r.d(t,{default:function(){return l}});var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"search-home"},[t("SearchHeader"),t("section",[e.searchList.length?t("div",[t("div",{staticClass:"search-history"},[e._m(0),t("div",{staticClass:"search-record-clean",on:{click:e.clearSearchList}},[e._v("清空历史搜索记录")])]),t("ul",{staticClass:"search-record"},e._l(e.searchList,(function(r,s){return t("li",{key:s,on:{click:function(t){return e.goSearchItem(r)}}},[e._v(e._s(r))])})),0)]):t("div",{staticClass:"no-history"},[e._v("暂无搜索记录")]),e._m(1)]),t("TabBar")],1)},a=[function(){var e=this,t=e._self._c;return t("div",[t("i",{staticClass:"iconfont icon-shizhong"}),t("span",[e._v("历史搜索")])])},function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"recommend"},[t("div",[t("i",{staticClass:"iconfont icon-changjingtuijian"}),t("span",[e._v("推荐商品")])])])])}],i=(r(7658),r(9608)),c=r(4162),n={name:"SearchHomeView",components:{TabBar:i.Z,SearchHeader:c.Z},data(){return{searchList:[]}},methods:{clearSearchList(){this.$dialog.alert({message:"是否清空历史搜索记录",showCancelButton:!0}).then((()=>{this.searchList=[],localStorage.setItem("searchList",[])})).catch((()=>{}))},goSearchItem(e){this.$router.push({name:"search-list",query:{key:e}})}},created(){this.searchList=JSON.parse(localStorage.getItem("searchList"))||[]}},o=n,h=r(1001),u=(0,h.Z)(o,s,a,!1,null,"1bf6a156",null),l=u.exports},5117:function(e,t,r){var s=r(6330),a=TypeError;e.exports=function(e,t){if(!delete e[t])throw a("Cannot delete property "+s(t)+" of "+s(e))}},541:function(e,t,r){var s=r(2109),a=r(7908),i=r(6244),c=r(3658),n=r(5117),o=r(7207),h=1!==[].unshift(0),u=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},l=h||!u();s({target:"Array",proto:!0,arity:1,forced:l},{unshift:function(e){var t=a(this),r=i(t),s=arguments.length;if(s){o(r+s);var h=r;while(h--){var u=h+s;h in t?t[u]=t[h]:n(t,u)}for(var l=0;l<s;l++)t[l]=arguments[l]}return c(t,r+s)}})}}]);
//# sourceMappingURL=333.69681a10.js.map