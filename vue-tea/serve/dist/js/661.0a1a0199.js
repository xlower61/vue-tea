"use strict";(self["webpackChunkvue_tea"]=self["webpackChunkvue_tea"]||[]).push([[661],{4162:function(t,e,a){a.d(e,{Z:function(){return h}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-header"},[e("i",{staticClass:"iconfont icon-31fanhui1 search-return",on:{click:t.goBack}}),e("div",{staticClass:"search-mid"},[e("i",{staticClass:"iconfont icon-search"}),e("form",{attrs:{action:"",onsubmit:"return false"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.goSearchList.apply(null,arguments)}}},[e("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchVal,expression:"searchVal",modifiers:{trim:!0}}],ref:"input",attrs:{type:"text",placeholder:"搜索您喜欢的商品"},domProps:{value:t.searchVal},on:{input:function(e){e.target.composing||(t.searchVal=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),e("div",{staticClass:"search-btn",on:{click:t.goSearchList}},[t._v("搜索")])])},r=[],i=(a(7658),a(541),{name:"searchHeader",data(){return{searchVal:this.$route.query.key||"",searchList:[]}},mounted(){window.addEventListener("touchend",this.myTouchMove,!0)},deactivated(){window.removeEventListener("touchend",this.myTouchMove,!1)},methods:{myTouchMove(){this.$refs.input.blur()},goBack(){"search-list"==this.$router.history.current.name?this.$router.push("/search"):this.$router.push("/")},goSearchList(){if(!this.searchVal)return;localStorage.getItem("searchList")?this.searchList=JSON.parse(localStorage.getItem("searchList")):localStorage.setItem("searchList","[]"),this.searchList.unshift(this.searchVal);let t=new Set(this.searchList);localStorage.setItem("searchList",JSON.stringify(Array.from(t))),this.searchVal!==this.$route.query.key&&this.$router.push({name:"search-list",query:{key:this.searchVal}})}}}),n=i,o=a(1001),c=(0,o.Z)(n,s,r,!1,null,"ab833fe6",null),h=c.exports},7661:function(t,e,a){a.r(e),a.d(e,{default:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"search-list container"},[e("div",{staticClass:"big-header"},[e("SearchHeader"),e("ul",t._l(t.chooseList.data,(function(a,s){return e("li",{key:s,on:{click:function(e){return t.changeTab(s)}}},[e("div",{class:{active:t.chooseList.currentIndex===s}},[t._v(t._s(a.key))]),1===a.has?e("div",{staticClass:"jiantou"},[e("i",{staticClass:"iconfont icon-xiangshangjiantou",class:{active:1===a.status}}),e("i",{staticClass:"iconfont icon-xiangxiajiantou",class:{active:2===a.status}})]):t._e()])})),0)],1),e("section",[t.goodsList.length?e("ul",t._l(t.goodsList,(function(a){return e("li",{key:a.id,on:{click:function(e){return t.goDetail(a.id)}}},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:a.imgURL,expression:"item.imgURL"}],attrs:{alt:""}}),e("h3",[t._v(t._s(a.name))]),e("div",{staticClass:"price"},[e("div",[e("span",[t._v("￥")]),e("b",[t._v(t._s(a.price))])]),e("div",[t._v("立即购买")])])])})),0):e("div",{staticClass:"noGoods"},[t._v("没有商品捏...")])]),e("TabBar")],1)},r=[],i=(a(7658),a(4162)),n=a(9608),o=a(7245);const c=(t,e)=>o.Z.get("/goods_list/data",{params:{searchName:t,...e}});var h={name:"SearchListView",components:{SearchHeader:i.Z,TabBar:n.Z},data(){return{goodsList:[],searchVal:"",chooseList:{currentIndex:0,data:[{name:"common",key:"综合",has:0},{name:"price",key:"价格",has:1,status:0},{name:"num",key:"销量",has:1,status:0},{name:"common",key:"筛选",has:0}]}}},created(){this.getSearchData()},watch:{$route(){this.$route.query.key&&this.getSearchData()}},computed:{orderBy(){let t=this.chooseList.data[this.chooseList.currentIndex],e=2===t.status?"desc":"asc";return{[t.name]:e}}},methods:{async getSearchData(){const{data:t}=await c(this.$route.query.key,this.orderBy);this.goodsList=t.data.data},changeTab(t){this.chooseList.currentIndex=t,this.chooseList.data.forEach(((e,a)=>{a!=t&&(e.status=0)})),this.chooseList.data[t].status=2===this.chooseList.data[t].status?1:2,this.getSearchData()},goDetail(t){this.$router.push({name:"Detail",params:{id:t}})}}},u=h,l=a(1001),d=(0,l.Z)(u,s,r,!1,null,"40c08215",null),m=d.exports},5117:function(t,e,a){var s=a(6330),r=TypeError;t.exports=function(t,e){if(!delete t[e])throw r("Cannot delete property "+s(e)+" of "+s(t))}},541:function(t,e,a){var s=a(2109),r=a(7908),i=a(6244),n=a(3658),o=a(5117),c=a(7207),h=1!==[].unshift(0),u=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(t){return t instanceof TypeError}},l=h||!u();s({target:"Array",proto:!0,arity:1,forced:l},{unshift:function(t){var e=r(this),a=i(e),s=arguments.length;if(s){c(a+s);var h=a;while(h--){var u=h+s;h in e?e[u]=e[h]:o(e,u)}for(var l=0;l<s;l++)e[l]=arguments[l]}return n(e,a+s)}})}}]);
//# sourceMappingURL=661.0a1a0199.js.map